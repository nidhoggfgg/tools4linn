# 延迟花括号展开功能 - 使用指南

## 🎯 功能说明

在树状模式中，现在支持**延迟展开**的花括号语法，让你可以先定义展开模板，然后在其下添加统一的子结构，最终创建时自动展开。

---

## 💡 核心概念

### 模式1：花括号 → 单个节点（延迟展开）

当输入包含花括号时，会作为**一个节点**添加到树形视图中，创建时才展开。

```
输入: {a,b,c}
树形视图: 📁 {a,b,c}  ← 一个节点
创建结果: 📁 a/
         📁 b/
         📁 c/
```

### 模式2：纯列表 → 多个节点（立即添加）

当输入不包含花括号时，每行作为一个独立节点。

```
输入: a
     b
     c
树形视图: 📁 a  ← 三个独立节点
         📁 b
         📁 c
创建结果: 📁 a/
         📁 b/
         📁 c/
```

---

## 📝 支持的花括号格式

### 1. 单行逗号分隔
```
{a,b,c}
```

### 2. 多行花括号
```
{
a
b
c
}
```
自动转换为：`{a,b,c}`

### 3. 带扩展名
```
{main,test,utils}.py
```

### 4. 数字范围
```
week_{1..12}
```

### 5. 字母范围
```
section_{A..Z}
```

### 6. 补零数字
```
day_{01..31}
```

---

## 🚀 实战示例

### 示例1：创建多个微服务（相同结构）

#### 步骤1：添加微服务节点
选择根节点 → 点击"添加文件夹" → 输入：
```
{user-service,order-service,product-service}
```

**树形视图显示：**
```
📁 根目录
  📁 {user-service,order-service,product-service}  ← 一个节点
```

#### 步骤2：在花括号节点下添加统一结构
选择 `{user-service,order-service,product-service}` 节点，继续添加：
- 添加文件夹：`src`
- 添加文件夹：`tests`
- 添加文件：`README.md`

**树形视图显示：**
```
📁 根目录
  📁 {user-service,order-service,product-service}
    📁 src
    📁 tests
    📄 README.md
```

#### 步骤3：创建

点击"开始创建"按钮。

**最终结果：**
```
📁 user-service/
  📁 src/
  📁 tests/
  📄 README.md
📁 order-service/
  📁 src/
  📁 tests/
  📄 README.md
📁 product-service/
  📁 src/
  📁 tests/
  📄 README.md
```

✨ **优势：** 不需要重复三次创建相同的结构！

---

### 示例2：创建课程周（带递增结构）

#### 步骤1：添加周次节点
```
week_{1..12}
```

#### 步骤2：在花括号节点下添加统一内容
```
📁 week_{1..12}
  📁 materials
  📁 homework
  📄 notes.md
```

#### 结果：
```
📁 week_1/
  📁 materials/
  📁 homework/
  📄 notes.md
📁 week_2/
  📁 materials/
  📁 homework/
  📄 notes.md
...
📁 week_12/
  📁 materials/
  📁 homework/
  📄 notes.md
```

---

### 示例3：创建多语言版本

#### 步骤1：
```
{en,zh,ja,ko}
```

#### 步骤2：
```
📁 {en,zh,ja,ko}
  📁 pages
  📁 components
  📄 i18n.json
```

#### 结果：
```
📁 en/
  📁 pages/
  📁 components/
  📄 i18n.json
📁 zh/
  📁 pages/
  📁 components/
  📄 i18n.json
📁 ja/
  📁 pages/
  📁 components/
  📄 i18n.json
📁 ko/
  📁 pages/
  📁 components/
  📄 i18n.json
```

---

### 示例4：多环境配置

#### 输入：
```
📁 {dev,staging,prod}
  📄 config.json
  📄 .env
```

#### 结果：
```
📁 dev/
  📄 config.json
  📄 .env
📁 staging/
  📄 config.json
  📄 .env
📁 prod/
  📄 config.json
  📄 .env
```

---

### 示例5：批量创建组件（纯列表模式）

如果你想快速创建多个**独立**的组件，使用纯列表模式：

#### 输入（不带花括号）：
```
Button
Input
Card
Modal
Dropdown
```

#### 结果：
5个独立的节点，可以分别在每个下面添加不同的子结构。

---

## 🔄 两种模式对比

| 特性 | 花括号模式 | 纯列表模式 |
|------|-----------|-----------|
| 输入格式 | `{a,b,c}` 或 `{\na\nb\nc\n}` | `a\nb\nc` |
| 树形视图节点数 | 1个 | 3个 |
| 子结构 | 统一（所有展开后的节点共享） | 独立（每个节点可以不同） |
| 适用场景 | 创建相同结构的多个目录 | 批量创建独立的目录 |

---

## ⚡ 快速选择指南

### 使用花括号模式（延迟展开）当：
- ✅ 需要为多个目录创建**相同的子结构**
- ✅ 目录名有规律（如 week_1, week_2...）
- ✅ 想要利用范围展开（如 `{1..100}`）
- ✅ 需要批量创建多个版本/环境/语言

### 使用纯列表模式当：
- ✅ 每个目录的子结构**不同**
- ✅ 只是想快速创建多个独立节点
- ✅ 目录名不规律
- ✅ 不需要花括号的展开功能

---

## 📌 注意事项

1. **花括号节点可以嵌套子节点** - 这是延迟展开的核心优势
2. **多行花括号会自动转换** - `{\na\nb\n}` → `{a,b,c}`
3. **空行会被忽略** - 不影响展开结果
4. **创建时才真正展开** - 在树形视图中只是一个节点
5. **可以组合使用** - 先用花括号定义模板，再用纯列表添加其他内容

---

## 🎨 UI 操作提示

### 识别当前模式

**花括号节点的特征：**
- 节点名称包含 `{` 和 `}`
- 显示为单个节点
- 创建时会显示："已添加花括号节点: {a,b,c}，创建时将自动展开"

**纯列表节点的特征：**
- 节点名称不包含花括号
- 多个独立节点
- 创建时会显示："成功批量添加 N 个文件夹"

---

## 🛠️ 高级技巧

### 技巧1：嵌套花括号

虽然在树形视图中不会立即展开嵌套，但创建时会自动处理：

```
📁 {frontend,backend}
  📁 {components,utils}
```

创建结果：
```
📁 frontend/
  📁 components/
  📁 utils/
📁 backend/
  📁 components/
  📁 utils/
```

### 技巧2：混合使用范围和列表

```
📁 week_{1..4}
  📄 {homework,quiz}.pdf
```

创建结果：
```
📁 week_1/
  📄 homework.pdf
  📄 quiz.pdf
📁 week_2/
  📄 homework.pdf
  📄 quiz.pdf
...
```

### 技巧3：先批量后定制

1. 用纯列表快速创建多个独立节点
2. 选择其中需要统一结构的几个
3. 在它们下面各自添加相同的子结构

（注：目前不支持多选，需要逐个操作）

---

## 🔗 相关文档

- [树状模式基础使用](./ui_tree_mode_example.md)
- [花括号展开语法详解](./BRACE_EXPANSION_GUIDE.md)
- [多行花括号语法](./MULTILINE_BRACE_SYNTAX.md)

---

## 💬 总结

**延迟花括号展开** = 在树形视图中保持模板状态 + 创建时自动展开

这个功能让你可以：
- 🎯 更高效地创建批量相同结构
- 🧩 直观地组织目录模板
- ⚡ 减少重复操作
- 🎨 灵活组合不同的创建方式

开始使用吧！🚀

